<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Phosphor: phosphor::TraceLog Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Phosphor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classphosphor_1_1_trace_log.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classphosphor_1_1_trace_log-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">phosphor::TraceLog Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="trace__log_8h_source.html">trace_log.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9084ab48cd9916adfea0420c6962e40c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a9084ab48cd9916adfea0420c6962e40c">TraceLog</a> (const <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> &amp;_config)</td></tr>
<tr class="separator:a9084ab48cd9916adfea0420c6962e40c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae86d34004e257bd6a45442a634370231"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ae86d34004e257bd6a45442a634370231">TraceLog</a> ()</td></tr>
<tr class="separator:ae86d34004e257bd6a45442a634370231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61da1a235de557b8321bf542defae32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ab61da1a235de557b8321bf542defae32">configure</a> (const <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> &amp;_config)</td></tr>
<tr class="separator:ab61da1a235de557b8321bf542defae32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22fde18331507432721f09e70f35822e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a22fde18331507432721f09e70f35822e">start</a> (const <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> &amp;_trace_config)</td></tr>
<tr class="separator:a22fde18331507432721f09e70f35822e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39c97c1cc03aac3d7ebd2294ae46a1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ad39c97c1cc03aac3d7ebd2294ae46a1a">start</a> (std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;, const <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> &amp;_trace_config)</td></tr>
<tr class="separator:ad39c97c1cc03aac3d7ebd2294ae46a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1fdb38d3c191ad833a828bbaf06a72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ada1fdb38d3c191ad833a828bbaf06a72">stop</a> (bool shutdown=false)</td></tr>
<tr class="separator:ada1fdb38d3c191ad833a828bbaf06a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c65ef1f9ee2e0edb9d6c64b8782c17f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a1c65ef1f9ee2e0edb9d6c64b8782c17f">stop</a> (std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;, bool shutdown=false)</td></tr>
<tr class="separator:a1c65ef1f9ee2e0edb9d6c64b8782c17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14ca2e9816276cbfb1950e9b363873b8"><td class="memTemplParams" colspan="2">template&lt;typename T , typename U &gt; </td></tr>
<tr class="memitem:a14ca2e9816276cbfb1950e9b363873b8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a14ca2e9816276cbfb1950e9b363873b8">logEvent</a> (const char *category, const char *name, <a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a> type, T argA, U argB)</td></tr>
<tr class="separator:a14ca2e9816276cbfb1950e9b363873b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c829496f66234db18f3071052a9297c"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a6c829496f66234db18f3071052a9297c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a6c829496f66234db18f3071052a9297c">logEvent</a> (const char *category, const char *name, <a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a> type, T argA)</td></tr>
<tr class="separator:a6c829496f66234db18f3071052a9297c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5acfe53152dd3c600f7365baa38a6ee6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a5acfe53152dd3c600f7365baa38a6ee6">logEvent</a> (const char *category, const char *name, <a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a> type)</td></tr>
<tr class="separator:a5acfe53152dd3c600f7365baa38a6ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c0245c0bc2e15e5268a154785aa987"><td class="memItemLeft" align="right" valign="top">const AtomicCategoryStatus &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ac9c0245c0bc2e15e5268a154785aa987">getCategoryStatus</a> (const char *category_group)</td></tr>
<tr class="separator:ac9c0245c0bc2e15e5268a154785aa987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47bd45e0cec58a6315aeab78a0562469"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a47bd45e0cec58a6315aeab78a0562469">getBuffer</a> ()</td></tr>
<tr class="separator:a47bd45e0cec58a6315aeab78a0562469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5041e833872a887191ec8ca8ef95d6d"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ae5041e833872a887191ec8ca8ef95d6d">getBuffer</a> (std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;)</td></tr>
<tr class="separator:ae5041e833872a887191ec8ca8ef95d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cc67e6a17aec48a3b5beb1acb28d5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ae5cc67e6a17aec48a3b5beb1acb28d5f">isEnabled</a> ()</td></tr>
<tr class="separator:ae5cc67e6a17aec48a3b5beb1acb28d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1fbcb3a1285fd447b4d8df6f6fccd8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ab1fbcb3a1285fd447b4d8df6f6fccd8e">registerThread</a> ()</td></tr>
<tr class="separator:ab1fbcb3a1285fd447b4d8df6f6fccd8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91fcc4d0476fa6d815975fb9e6f056ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a91fcc4d0476fa6d815975fb9e6f056ef">deregisterThread</a> ()</td></tr>
<tr class="separator:a91fcc4d0476fa6d815975fb9e6f056ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2df1c20bf288ee486ad043dc61c3b09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#af2df1c20bf288ee486ad043dc61c3b09">lock</a> ()</td></tr>
<tr class="separator:af2df1c20bf288ee486ad043dc61c3b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa2902b02d5327ffe23301c7cf92a82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#afaa2902b02d5327ffe23301c7cf92a82">unlock</a> ()</td></tr>
<tr class="separator:afaa2902b02d5327ffe23301c7cf92a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad214f6f2f7881800d1ac6dd243806679"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad214f6f2f7881800d1ac6dd243806679"></a>
<a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getTraceConfig</b> () const </td></tr>
<tr class="separator:ad214f6f2f7881800d1ac6dd243806679"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ade38924fc3174ca43696c6432f05c658"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ade38924fc3174ca43696c6432f05c658">getInstance</a> ()</td></tr>
<tr class="separator:ade38924fc3174ca43696c6432f05c658"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a30cd12f4e9970f7347efe63986638227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a30cd12f4e9970f7347efe63986638227">getChunkTenant</a> ()</td></tr>
<tr class="separator:a30cd12f4e9970f7347efe63986638227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3501043f159ac129c97cf03b302041"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#aac3501043f159ac129c97cf03b302041">replaceChunk</a> (<a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;ct)</td></tr>
<tr class="separator:aac3501043f159ac129c97cf03b302041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7072d5d2fa370d231b6c93490d2180ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a7072d5d2fa370d231b6c93490d2180ca">resetChunk</a> (<a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;ct)</td></tr>
<tr class="separator:a7072d5d2fa370d231b6c93490d2180ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4572e4a608d98fcee59fad41bda1db58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a4572e4a608d98fcee59fad41bda1db58">evictThreads</a> (std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;lh)</td></tr>
<tr class="separator:a4572e4a608d98fcee59fad41bda1db58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ad628d76546aac802f047e8ee786e6ab5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#ad628d76546aac802f047e8ee786e6ab5">shared_chunks</a></td></tr>
<tr class="separator:ad628d76546aac802f047e8ee786e6ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a366b267a03ceffcc9aaa4daf2561cbaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a366b267a03ceffcc9aaa4daf2561cbaf">trace_config</a></td></tr>
<tr class="separator:a366b267a03ceffcc9aaa4daf2561cbaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b650b4031a9c1b03c42b4bf99c33a7"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#aa4b650b4031a9c1b03c42b4bf99c33a7">enabled</a></td></tr>
<tr class="separator:aa4b650b4031a9c1b03c42b4bf99c33a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a113a9a75825d65aa7d235eeefd4fb"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a51a113a9a75825d65aa7d235eeefd4fb">mutex</a></td></tr>
<tr class="separator:a51a113a9a75825d65aa7d235eeefd4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c26730cdfcd9a5006933bb3440253c2"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a7c26730cdfcd9a5006933bb3440253c2">buffer</a></td></tr>
<tr class="separator:a7c26730cdfcd9a5006933bb3440253c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba5b955aca310f4bd5eda20ab7432d0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#aaba5b955aca310f4bd5eda20ab7432d0">generation</a> = 0</td></tr>
<tr class="separator:aaba5b955aca310f4bd5eda20ab7432d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a254ad893c602a1c54a7c7347c6495925"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; <a class="el" href="classphosphor_1_1_sentinel.html">Sentinel</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#a254ad893c602a1c54a7c7347c6495925">registered_sentinels</a></td></tr>
<tr class="separator:a254ad893c602a1c54a7c7347c6495925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0b34e540994efaabe4ce310070287cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classphosphor_1_1_category_registry.html">CategoryRegistry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphosphor_1_1_trace_log.html#af0b34e540994efaabe4ce310070287cb">registry</a></td></tr>
<tr class="separator:af0b34e540994efaabe4ce310070287cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> class is the main public management interface of Phosphor. Generally the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> is used as a singleton, this instance is acquired via <a class="el" href="classphosphor_1_1_trace_log.html#ade38924fc3174ca43696c6432f05c658">TraceLog::getInstance()</a>.</p>
<p>Logging can be enabled by passing in a <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> object with the desired options to the TraceConfig::start() method: </p><pre class="fragment">// Enable tracing with a fixed buffer, 5 megabytes in size
TraceLog::getInstance().start(TraceConfig(BufferMode::fixed,
                                          5 * 1024 * 1024))
</pre><p>Once enabled, tracing will be logged wherever code has been instrumented with the instrumentation API described in <a class="el" href="phosphor_8h.html">phosphor.h</a>.</p>
<p>This class's public interface is <em>generally</em> thread-safe. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9084ab48cd9916adfea0420c6962e40c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phosphor::TraceLog::TraceLog </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for creating a <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> with a specific log config</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_config</td><td>The <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> to be used by the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae86d34004e257bd6a45442a634370231"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phosphor::TraceLog::TraceLog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for generating a <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> from the current environment according to the rules set out in <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a>.</p>
<p>Will additionally start tracing if the <code>PHOSPHOR_TRACING_START</code> environment variable is appropriately configured according to the rules for <a class="el" href="classphosphor_1_1_trace_config.html#a10b69a4104619f471af06ab44bc2bf7e">TraceConfig::fromString</a></p>
<dl class="section return"><dt>Returns</dt><dd>The configured <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab61da1a235de557b8321bf542defae32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::configure </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to perform a one-time configuration of the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_config</td><td>The <a class="el" href="classphosphor_1_1_trace_log_config.html">TraceLogConfig</a> to be used by the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a91fcc4d0476fa6d815975fb9e6f056ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::deregisterThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>De-registers the current thread</p>
<p>De-registering will free up any resources associated with the thread. This MUST be called from registered threads before they shutdown to prevent memory-leaks as the only reference to resources they allocate are in thread local storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> instance that the sentinel is using </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4572e4a608d98fcee59fad41bda1db58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::evictThreads </td>
          <td>(</td>
          <td class="paramtype">std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Used for evicting all ChunkTenants from the log</p>
<p>This will use the set of sentinels established from the calls to registerThread and deregisterThread and call close() on them.</p>
<p>This will effectively send a message to all ChunkTenants that their current references to chunks in their possession are no longer valid.</p>
<p>Once this function returns the buffer that the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> had SHOULD be safe to be freed / iterated etc. </p>

</div>
</div>
<a class="anchor" id="a47bd45e0cec58a6315aeab78a0562469"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> &gt; phosphor::TraceLog::getBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transfers ownership of the current <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> to the caller</p>
<p>Should only be called while Tracing is disabled. The returned unique_ptr is not guaranteed to be non-null, and in fact <em>will</em> be null if the buffer has previously been retrieved.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::logic_error</td><td>if tracing is currently enabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae5041e833872a887191ec8ca8ef95d6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> &gt; phosphor::TraceLog::getBuffer </td>
          <td>(</td>
          <td class="paramtype">std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Same as <a class="el" href="classphosphor_1_1_trace_log.html#a47bd45e0cec58a6315aeab78a0562469">TraceLog::getBuffer()</a> except with external locking</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Lock</td><td>guard holding the external lock </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::logic_error</td><td>if tracing is currently enabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac9c0245c0bc2e15e5268a154785aa987"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const AtomicCategoryStatus &amp; phosphor::TraceLog::getCategoryStatus </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category_group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to get a reference to a reusable CategoryStatus. This should generally be held in a block-scope static at a given trace point to verify if the category for that trace point is presently enabled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category_group</td><td>The category group to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>const reference to the CategoryStatus atomic that holds that status for the given category group </dd></dl>

</div>
</div>
<a class="anchor" id="a30cd12f4e9970f7347efe63986638227"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">TraceLog::ChunkTenant</a> * phosphor::TraceLog::getChunkTenant </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets a pointer to the appropriate <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> (or nullptr) with the lock acquired.</p>
<dl class="section return"><dt>Returns</dt><dd>A valid <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> with available events or a nullptr if a valid <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> could not be acquired. </dd></dl>

</div>
</div>
<a class="anchor" id="ade38924fc3174ca43696c6432f05c658"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &amp; phosphor::TraceLog::getInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Singleton static method to get the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> instance</p>
<p>This is technically ThreadSafe according to the C++11 spec but versions of MSVC &lt; 2015 are not <em>quite</em> conforming.</p>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> instance </dd></dl>

</div>
</div>
<a class="anchor" id="ae5cc67e6a17aec48a3b5beb1acb28d5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool phosphor::TraceLog::isEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current state of tracing of this <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a></p>
<dl class="section return"><dt>Returns</dt><dd>True if tracing is enabled, False if tracing is disabled </dd></dl>

</div>
</div>
<a class="anchor" id="af2df1c20bf288ee486ad043dc61c3b09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lock the trace log externally</p>
<p>Note: Prefer the internal locking on the methods </p>

</div>
</div>
<a class="anchor" id="a14ca2e9816276cbfb1950e9b363873b8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename U &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::logEvent </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>argA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U&#160;</td>
          <td class="paramname"><em>argB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs an event in the current buffer (if applicable)</p>
<p>This method should not be used directly, instead the macros contained within <a class="el" href="phosphor_8h.html">phosphor.h</a> should be used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>The category to log the event into. This (and the name) should usually be a string literal as the pointer should remain valid until the buffer is freed. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the event </td></tr>
    <tr><td class="paramname">type</td><td>The type of the event </td></tr>
    <tr><td class="paramname">argA</td><td>Argument to be saved with the event </td></tr>
    <tr><td class="paramname">argB</td><td>Argument to be saved with the event </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6c829496f66234db18f3071052a9297c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::logEvent </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>argA</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs an event in the current buffer (if applicable)</p>
<p>This method should not be used directly, instead the macros contained within <a class="el" href="phosphor_8h.html">phosphor.h</a> should be used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>The category to log the event into. This (and the name) should usually be a string literal as the pointer should remain valid until the buffer is freed. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the event </td></tr>
    <tr><td class="paramname">type</td><td>The type of the event </td></tr>
    <tr><td class="paramname">argA</td><td>Argument to be saved with the event </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5acfe53152dd3c600f7365baa38a6ee6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::logEvent </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classphosphor_1_1_trace_event.html#a360f1bd13c99c0ece9d49367e7fc312b">TraceEvent::Type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs an event in the current buffer (if applicable)</p>
<p>This method should not be used directly, instead the macros contained within <a class="el" href="phosphor_8h.html">phosphor.h</a> should be used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>The category to log the event into. This (and the name) should usually be a string literal as the pointer should remain valid until the buffer is freed. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the event </td></tr>
    <tr><td class="paramname">type</td><td>The type of the event </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab1fbcb3a1285fd447b4d8df6f6fccd8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::registerThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Registers the current thread for tracing (Optional)</p>
<p>Registering a thread is used for a long-living thread and is used to give it a dedicated <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> and optionally a name. A registered thread MUST be de-registered before the thread is joined as the act of registering allocates resources only accessibly via thread -local storage.</p>
<p>Registering is desirable as the thread will otherwise share a <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> with all other non-registered threads. Because this involves acquiring locks that may be under contention this can be expensive. </p>

</div>
</div>
<a class="anchor" id="aac3501043f159ac129c97cf03b302041"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool phosphor::TraceLog::replaceChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;&#160;</td>
          <td class="paramname"><em>ct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces the current chunk held by the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> with a new chunk (typically because it is full).</p>
<p>This function must be called while the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> sentinel is held in the 'Busy' state (via <a class="el" href="classphosphor_1_1_sentinel.html#ae63eab2f17eec6b5530bfa56da1b27eb">Sentinel::acquire</a> or <a class="el" href="classphosphor_1_1_sentinel.html#a7ead8e098b98397cf731e5e5733a9215">Sentinel::reopen</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ct</td><td>The <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> that should have it's chunk returned and replaced </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the chunk has been successfully replaced, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a7072d5d2fa370d231b6c93490d2180ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::resetChunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> &amp;&#160;</td>
          <td class="paramname"><em>ct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Resets the current chunk held by the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> (because the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> has been evicted by the buffer)</p>
<p>This function should be called when the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a> is found to be closed. This is so that the eviction from the buffer can be acknowledged and the reference to the chunk removed. Once this has been done the chunk can be transitioned back into the Open state. </p>

</div>
</div>
<a class="anchor" id="a22fde18331507432721f09e70f35822e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::start </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>_trace_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start tracing with the specified config</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_trace_config</td><td><a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> to use for this tracing run </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad39c97c1cc03aac3d7ebd2294ae46a1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::start </td>
          <td>(</td>
          <td class="paramtype">std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>_trace_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start tracing with the specified config and using an external lock</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lock</td><td>guard holding the external lock </td></tr>
    <tr><td class="paramname">_trace_config</td><td><a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> to use for this tracing run </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ada1fdb38d3c191ad833a828bbaf06a72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::stop </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shutdown</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Immediately stops tracing </p>

</div>
</div>
<a class="anchor" id="a1c65ef1f9ee2e0edb9d6c64b8782c17f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::stop </td>
          <td>(</td>
          <td class="paramtype">std::lock_guard&lt; <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shutdown</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Immediately stops tracing (With external locking)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Lock</td><td>guard holding the external lock </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afaa2902b02d5327ffe23301c7cf92a82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void phosphor::TraceLog::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unlock the trace log externally</p>
<p>Note: Prefer the internal locking on the methods </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7c26730cdfcd9a5006933bb3440253c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a>&gt; phosphor::TraceLog::buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>buffer is the current buffer that is being used by the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a>.</p>
<p>While logging is enabled the buffer will have various chunks of the buffer loaned out.</p>
<p>This buffer may become NULL once tracing stops if a user asks for it as movement semantics are used and buffers are only created when tracing starts. </p>

</div>
</div>
<a class="anchor" id="aa4b650b4031a9c1b03c42b4bf99c33a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; phosphor::TraceLog::enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether or not tracing is currently enabled</p>
<p>By transitioning this boolean to false no new trace events will be logged, but any threads currently in the process of tracing an event MAY finish tracing the event they're on. </p>

</div>
</div>
<a class="anchor" id="aaba5b955aca310f4bd5eda20ab7432d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t phosphor::TraceLog::generation = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current tracing generation. This is incremented every-time tracing is stopped and is passed into the <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a> when it is constructed in order to 'uniquely' identify it. </p>

</div>
</div>
<a class="anchor" id="a51a113a9a75825d65aa7d235eeefd4fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex phosphor::TraceLog::mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>mutex is the 'global' lock for the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> and should be acquired when modifying the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a> itself or the current <a class="el" href="classphosphor_1_1_trace_buffer.html">TraceBuffer</a>.</p>
<p>It is not required to be acquired when modifying a loaned out <a class="el" href="classphosphor_1_1_trace_chunk.html">TraceChunk</a> contained within a <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>, this is protected by the <a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>'s sentinel lock instead. </p>

</div>
</div>
<a class="anchor" id="a254ad893c602a1c54a7c7347c6495925"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;<a class="el" href="classphosphor_1_1_sentinel.html">Sentinel</a>*&gt; phosphor::TraceLog::registered_sentinels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The set of sentinels that have been registered to this <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a>. </p>

</div>
</div>
<a class="anchor" id="af0b34e540994efaabe4ce310070287cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphosphor_1_1_category_registry.html">CategoryRegistry</a> phosphor::TraceLog::registry</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Category registry which manages the enabled / disabled categories </p>

</div>
</div>
<a class="anchor" id="ad628d76546aac802f047e8ee786e6ab5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structphosphor_1_1_trace_log_1_1_chunk_tenant.html">ChunkTenant</a>&gt; phosphor::TraceLog::shared_chunks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The shared ChunkTenants which are used by default when a thread has not been registered.</p>
<p>This is because we need to guarantee that the resources in the thread-specific chunk will be at some point freed up. </p>

</div>
</div>
<a class="anchor" id="a366b267a03ceffcc9aaa4daf2561cbaf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> phosphor::TraceLog::trace_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current or last-used <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> of the <a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a>, this is only ever set by the <a class="el" href="classphosphor_1_1_trace_log.html#a22fde18331507432721f09e70f35822e">start()</a> method.</p>
<p>This is a full copy of a <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> rather than a reference to allow reuse / modification of a <a class="el" href="classphosphor_1_1_trace_config.html">TraceConfig</a> that was passed in by a user. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/phosphor/<a class="el" href="trace__log_8h_source.html">trace_log.h</a></li>
<li>src/trace_log.cc</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>phosphor</b></li><li class="navelem"><a class="el" href="classphosphor_1_1_trace_log.html">TraceLog</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
